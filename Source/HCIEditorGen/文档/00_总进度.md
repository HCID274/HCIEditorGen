# HCIAbilityKit 总进度（重构 V3）

> 项目根目录：`D:\1_Projects\04_GameDev\UE_Projects\HCIEditorGen`
> 引擎版本：`UE 5.4.4`
> 更新时间：`2026-02-15`
> 当前阶段：`Stage B（Slice B0 进行中，待 UE 手测）`
> 当前策略：`资产审计主链路优先 -> AI 视觉后置增强 -> 每切片停测`

## 1. 范围冻结（唯一主线）

- 仅做 `HCIAbilityKit`，不扩展到无关系统。
- 固定架构：`HCIAbilityKitRuntime + HCIAbilityKitEditor`（插件双模块）。
- 固定目标：交付 `Smart Asset Auditor`（资产扫描 + 规则审计 + 报告导出）。
- 固定流程：`计划 -> 执行 -> 审阅`，敏感操作必须授权门禁。
- 本期范围收束：先完成 C++ 高性能审计主链路；AI 视觉为最终加分项。

## 2. 已完成事实（历史基线）

- 插件双模块迁移（Step1）完成并 UE 手测通过。
- 解析服务抽离与 Python Hook（Step2）完成并 UE 手测通过。
- 检索实验线（Step3-Slice1~3）代码与基础门禁已完成，作为历史技术基线保留。
- 已补充 10k 合成数据生成能力与验证记录（用于后续性能/语义测试）。

## 3. 当前主线 Roadmap（V3）

### Stage A 文档与契约冻结（进行中）

- 目标：完成路线重规划、审计契约、半月执行计划冻结。
- 完成标准：`00/01/05` 与测试记录口径一致。

### Stage B C++ 异步扫描主链路

- 目标：先完成“种子资产接入 + 引用链打通”，再基于 `AssetRegistry + FAssetData` 完成非阻塞扫描。
- 完成标准：10k 数据资产可真实指向项目内 `UStaticMesh`；扫描期间编辑器可继续操作；`Locked/Dirty` 风险资产可安全跳过并留痕。

### Stage C 规则审计与报告闭环

- 目标：命名/目录/基础性能规则落地，统一异常结构，导出 JSON 报告。
- 完成标准：每条异常包含 `rule_id/reason/hint/evidence`。

### Stage D 内存与吞吐优化

- 目标：分批加载与释放策略、峰值内存与吞吐监控。
- 完成标准：批量审计稳定，无明显内存失控。

### Stage E AI 视觉增强（加分项）

- 目标：对 `Critical` 或用户手动复核资产执行截图 + 多模态诊断，并可降级到纯规则链路。
- 完成标准：AI 失败时主链路可用率 100%。

## 4. 测试门禁（强制）

- 每个切片必须执行：编译 -> UE 手测 -> 记录。
- 用户未明确 `Pass`，不得进入下一切片。
- 记录目录：`Source/HCIEditorGen/文档/测试记录/`
- 测试源数据：`SourceData/AbilityKits/`

## 5. 当前切片（下一步）

- 切片编号：`Stage B - Slice B0`
- 当前状态：`脚本与命令链路已落地，待你在 UE 准备 Seed 模型后手测 Pass/Fail`
- 切片目标：完成“种子资产清单扫描与 manifest 校验”，打通 Stage B 起点门禁。
- 通过后动作：进入 `Stage B - Slice B1`（`RepresentingMesh` 字段接入与导入绑定）。

## 6. 文档索引（冻结）

- 技术方案：`Source/HCIEditorGen/文档/01_技术方案_插件双模块.md`
- 测试门禁：`Source/HCIEditorGen/文档/02_测试门禁与节奏.md`
- 契约规范：`Source/HCIEditorGen/文档/03_Schema_v1与错误契约.md`
- 结构总览：`Source/HCIEditorGen/文档/04_代码框架总览_树状图.md`
- 执行总方案：`Source/HCIEditorGen/文档/05_开发执行总方案_资产审计.md`
- 生成算法：`Source/HCIEditorGen/文档/06_合成数据生成算法说明.md`

## 7. 进度日志

- `2026-02-12 ~ 2026-02-13`：Step1~Step3（检索实验线）完成既定切片并形成基线代码。
- `2026-02-15`：完成 10k 合成数据生成脚本与验证（语义鸿沟 + 复合陷阱）。
- `2026-02-15`：路线重规划为 V3：资产审计主链路优先，AI 视觉增强后置；并同步更新 `00/01/05` 权威文档。
- `2026-02-15`：根据评审补齐缺失点：在 `03` 冻结 Triangle Count 提取契约与 RuleRegistry 约束，在 `06` 增加性能陷阱定义并同步生成脚本字段（`virtual_path/triangle_count_lod0`）。
- `2026-02-15`：根据风险评审进一步收口：执行主计划文件重命名为 `05_开发执行总方案_资产审计.md`，并补充 AI 触发边界（仅 Critical/手动复核）、主线程截图约束与 Locked/Dirty 资产跳过策略。
- `2026-02-15`：新增 StageA-SliceA3 文档冻结项：Stage B 启动采用“种子资产导入 + RepresentingMesh 引用链 + 真实面数追踪”实战方案。
- `2026-02-15`：吸收 StageA-SliceA3 风险评审补充：Stage D 批次加载释放与 GC 节流、`seed_mesh_manifest` UE 长路径边界、`TriangleExpectedMismatchRule`（actual vs expected）告警口径。
- `2026-02-15`：StageB-SliceB0 工具链落地：新增 `hci_build_seed_mesh_manifest.py`（build/validate），并在生成脚本中接入 `--seed-mesh-manifest -> representing_mesh` 自动绑定与单测。
