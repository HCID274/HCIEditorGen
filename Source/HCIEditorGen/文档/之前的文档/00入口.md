# 10_UEå®è·µï¼šæ–°æ‰‹å¯åŠ¨å…¥å£ï¼ˆä»é›¶å¼€å§‹ï¼‰

> **å½“å‰çŠ¶æ€**ï¼šç¯å¢ƒå·²é…å¥½ï¼ˆUE 5.4.4 + IDEï¼‰ã€‚
> **ä»Šæ—¥ç›®æ ‡**ï¼šå»ºç«‹é¡¹ç›® + è·‘é€šç¬¬ä¸€ä¸ª C++ èµ„äº§ã€‚

ä½ æ˜¯æ–°æ‰‹ï¼Œ**è¯·ä¸¥æ ¼æŒ‰ç…§ä¸‹é¢çš„ Step 1-4 é¡ºåºæ“ä½œ**ï¼Œä¸è¦è·³æ­¥ï¼Œä¸è¦è‡ªå·±å‘æŒ¥å–µï¼

---

## ğŸ”¥ Step 1ï¼šåˆ›å»ºé¡¹ç›®ï¼ˆHCIEditorGenï¼‰

åˆ«ç®¡ä»€ä¹ˆâ€œæ¨¡å—åŒ–â€ã€â€œæ’ä»¶æ¶æ„â€ï¼Œå…ˆæå‡ºä¸€ä¸ªèƒ½è·‘çš„ç©ºé¡¹ç›®ã€‚

1. **æ‰“å¼€ UE å¯åŠ¨å™¨**ï¼š
   - è¿è¡Œ `Epic Games Launcher` -> å·¦ä¾§ `Unreal Engine` -> å³ä¸Šè§’ `Launch Unreal Engine 5.4.4`ã€‚
2. **æ–°å»ºé¡¹ç›®è®¾ç½®**ï¼ˆå‚æ•°å¿…é¡»å®Œå…¨ä¸€è‡´ï¼‰ï¼š
   - å·¦ä¾§æ é€‰ï¼š**Games**ï¼ˆæ¸¸æˆï¼‰ã€‚
   - æ¨¡æ¿é€‰ï¼š**Blank**ï¼ˆç©ºç™½ï¼‰ã€‚
   - æ ¸å¿ƒè®¾ç½®ï¼ˆå³ä¾§ï¼‰ï¼š
     - **C++**ï¼ˆä¸€å®šè¦é€‰ C++ï¼Œä¸è¦é€‰ Blueprintï¼‰ã€‚
     - **Target Platform**: Desktopã€‚
     - **Quality Preset**: Maximumã€‚
     - **Starter Content**: Uncheckedï¼ˆä¸å‹¾é€‰ï¼Œä¿æŒå¹²å‡€ï¼‰ã€‚
     - **Raytracing**: Uncheckedï¼ˆæš‚æ—¶ä¸ç”¨ï¼‰ã€‚
3. **å‘½åä¸è·¯å¾„**ï¼ˆå…³é”®ï¼‰ï¼š
   - **Project Name**: `HCIEditorGen`
   - **Location**: `D:\Dev\UE_Projects`ï¼ˆæˆ–è€…ä½ æ‰¾ä¸ª**è·¯å¾„å…¨è‹±æ–‡ã€æ²¡æœ‰ç©ºæ ¼**çš„æ–‡ä»¶å¤¹ï¼Œåƒä¸‡åˆ«æ”¾æ¡Œé¢ï¼ï¼‰ã€‚
4. **ç‚¹å‡» Create**ã€‚
   - ç­‰å¾… IDEï¼ˆRider æˆ– VSï¼‰è‡ªåŠ¨å¼¹å‡ºæ¥ï¼Œå¹¶ä¸” UE ç¼–è¾‘å™¨ä¹Ÿä¼šè‡ªåŠ¨æ‰“å¼€ã€‚

> **âœ… éªŒæ”¶æ ‡å‡†**ï¼š
> 1. IDE æ‰“å¼€äº†ï¼Œèƒ½çœ‹åˆ° `HCIEditorGen` çš„ä»£ç ç»“æ„ã€‚
> 2. UE ç¼–è¾‘å™¨æ‰“å¼€äº†ï¼Œå³ä¸‹è§’æ²¡æœ‰çº¢å­—æŠ¥é”™ã€‚

---

## ğŸ“‚ Step 2ï¼šå»ºç«‹æ–‡ä»¶ç›®å½•ï¼ˆWindows å±‚é¢ï¼‰

å…³æ‰ UE ç¼–è¾‘å™¨ï¼ˆIDE ç•™ç€ï¼‰ï¼Œå»ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹é‡Œï¼ˆä¾‹å¦‚ `D:\Dev\UE_Projects\HCIEditorGen\`ï¼‰ï¼Œæ‰‹åŠ¨å»ºç«‹ä»¥ä¸‹æ–‡ä»¶å¤¹ï¼š

1. **æƒå¨æ•°æ®æºç›®å½•**ï¼š
   - åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼ˆå’Œ `HCIEditorGen.uproject` åŒçº§ï¼‰æ–°å»ºæ–‡ä»¶å¤¹ï¼š`SourceData`ã€‚
   - è¿›å»ï¼Œå†å»ºä¸€ä¸ªå­æ–‡ä»¶å¤¹ï¼š`AbilityKits`ã€‚
   - **ç»“æœ**ï¼š`...\HCIEditorGen\SourceData\AbilityKits\`

2. **å‡†å¤‡æµ‹è¯•æ–‡ä»¶**ï¼š
   - åœ¨ `AbilityKits` æ–‡ä»¶å¤¹é‡Œï¼Œå³é”®æ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£ï¼Œå‘½åä¸ºï¼š`HCI_Fire_01.hciabilitykit`ï¼ˆæ³¨æ„åç¼€åè¦æ”¹æ‰ `.txt`ï¼‰ã€‚
   - ç”¨è®°äº‹æœ¬æ‰“å¼€å®ƒï¼Œå¤åˆ¶ä¸‹é¢çš„å†…å®¹è¿›å»å¹¶ä¿å­˜ï¼š
     ```json
     {
       "kit_id": "HCI_Fire_01",
       "display_name": "Fire Kit Alpha",
       "kit_tags": ["Kit.Fire"],
       "params": {
         "damage": 50.0
       },
       "abilities": []
     }
     ```

> **âœ… éªŒæ”¶æ ‡å‡†**ï¼š
> ä½ åœ¨ç¡¬ç›˜ä¸Šæœ‰äº†ä¸€ä¸ª `SourceData/AbilityKits/HCI_Fire_01.hciabilitykit` æ–‡ä»¶ï¼Œå†…å®¹æ˜¯ JSONã€‚

---

## ğŸ’» Step 3ï¼šåˆ›å»ºç¬¬ä¸€ä¸ª C++ ç±»ï¼ˆUHCIAbilityKitAssetï¼‰

å›åˆ° IDEï¼ˆRider/VSï¼‰ï¼Œæˆ‘ä»¬è¦å‘Šè¯‰ UEï¼šâ€œæˆ‘æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æ•°æ®ç±»å‹â€ã€‚

1. **æ‰¾åˆ°ä½ç½®**ï¼š
   - åœ¨ IDE çš„è§£å†³æ–¹æ¡ˆè§†å›¾é‡Œï¼Œæ‰¾åˆ° `Games/HCIEditorGen/Source/HCIEditorGen`ã€‚
2. **æ–°å»ºç±»**ï¼š
   - å³é”® -> Add -> New Unreal Classï¼ˆæˆ–è€…æ–°å»º C++ Classï¼‰ã€‚
   - **çˆ¶ç±»é€‰æ‹©**ï¼šæœç´¢ `PrimaryDataAsset`ï¼Œé€‰ä¸­å®ƒã€‚
   - **å‘½å**ï¼š`HCIAbilityKitAsset`ï¼ˆUE ä¼šè‡ªåŠ¨åŠ  U å‰ç¼€å˜æˆ `UHCIAbilityKitAsset`ï¼‰ã€‚
   - **è·¯å¾„**ï¼šä¿æŒé»˜è®¤ï¼Œç‚¹ Createã€‚
3. **å¤åˆ¶ä»£ç **ï¼ˆç›´æ¥è¦†ç›–ï¼‰ï¼š

**HCIAbilityKitAsset.h** (å¤´æ–‡ä»¶)ï¼š
```cpp
#pragma once

#include "CoreMinimal.h"
#include "Engine/DataAsset.h"
#include "GameplayTagContainer.h" // è®°å¾—åœ¨ Build.cs é‡ŒåŠ  "GameplayTags"
#include "HCIAbilityKitAsset.generated.h"

UCLASS(BlueprintType)
class HCIEDITORGEN_API UHCIAbilityKitAsset : public UPrimaryDataAsset
{
	GENERATED_BODY()

public:
	// å”¯ä¸€ ID
	UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = "HCI")
	FName KitId;

	// æ˜¾ç¤ºåç§°
	UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = "HCI")
	FText DisplayName;

	// æ ‡ç­¾ï¼ˆä¾‹å¦‚ Kit.Fireï¼‰
	UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = "HCI")
	FGameplayTagContainer KitTags;

	// æ¼”ç¤ºç”¨çš„æ•°å€¼ï¼ˆéªŒè¯ç®¡çº¿ç”¨ï¼‰
	UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = "HCI")
	float Damage;

#if WITH_EDITORONLY_DATA
	//è¿™æ˜¯å¿…é¡»çš„ï¼å‘Šè¯‰UEè¿™ä¸ªèµ„äº§æ˜¯ä»å“ªä¸ªæ–‡ä»¶å¯¼å…¥çš„
	UPROPERTY(VisibleAnywhere, Instanced, Category = "ImportSettings")
	TObjectPtr<class UAssetImportData> AssetImportData;

	// ä¸‹é¢è¿™ä¿©æ˜¯æ ‡å‡†æµç¨‹ï¼Œè®©å³é”® Reimport ç”Ÿæ•ˆ
	virtual void PostInitProperties() override;
	virtual void GetAssetRegistryTags(TArray<FAssetRegistryTag>& OutTags) const override; // UE5.4 ç­¾åå¯èƒ½æœ‰å˜ï¼Œå…ˆå†™ä¸Š
#endif
};
```

**HCIAbilityKitAsset.cpp** (æºæ–‡ä»¶)ï¼š
```cpp
#include "HCIAbilityKitAsset.h"
#include "EditorFramework/AssetImportData.h" // è®°å¾—åœ¨ Build.cs åŠ ä¾èµ–

#if WITH_EDITORONLY_DATA
void UHCIAbilityKitAsset::PostInitProperties()
{
	Super::PostInitProperties();
	if (!IsTemplate())
	{
		// ç¡®ä¿ ImportData å­˜åœ¨
		if (!AssetImportData)
		{
			AssetImportData = NewObject<UAssetImportData>(this, TEXT("AssetImportData"));
		}
	}
}

void UHCIAbilityKitAsset::GetAssetRegistryTags(TArray<FAssetRegistryTag>& OutTags) const
{
	if (AssetImportData)
	{
		OutTags.Add(FAssetRegistryTag(SourceFileTagName(), AssetImportData->GetSourceData().ToJson(), FAssetRegistryTag::TT_Hidden));
	}
	Super::GetAssetRegistryTags(OutTags);
}
#endif
```

4. **ğŸš‘ ç´§æ€¥ä¿®è¡¥ Build.cs**ï¼ˆå¦åˆ™ç¼–è¯‘ä¼šæŠ¥é”™ï¼‰ï¼š
   - æ‰¾åˆ° `HCIEditorGen.Build.cs` æ–‡ä»¶ã€‚
   - åœ¨ `PublicDependencyModuleNames` é‡ŒåŠ ä¸Šï¼š`"GameplayTags"`ã€‚
   - **é‡è¦**ï¼šè¿™æ­¥ä¸åšä¼šæŠ¥ `FGameplayTagContainer` æ‰¾ä¸åˆ°ç¬¦å·ã€‚

> **âœ… éªŒæ”¶æ ‡å‡†**ï¼š
> ç‚¹å‡» IDE çš„ Build/Compile æŒ‰é’®ï¼Œ**æ˜¾ç¤º Build Succeededï¼ˆç¼–è¯‘æˆåŠŸï¼‰**ã€‚
> å¦‚æœæŠ¥é”™ï¼Œç«‹åˆ»ç”¨ `/bug` æŠŠæŠ¥é”™ä¿¡æ¯å‘ç»™æˆ‘ï¼

---

## ğŸ® Step 4ï¼šæœ€ç»ˆéªŒè¯ï¼ˆæ‰‹åŠ¨åˆ›å»ºèµ„äº§ï¼‰

1. å›åˆ° IDEï¼ŒæŒ‰ `F5` æˆ–ç‚¹å‡» `Run` å¯åŠ¨ UE ç¼–è¾‘å™¨ã€‚
2. åœ¨ä¸‹æ–¹ Content Browserï¼ˆå†…å®¹æµè§ˆå™¨ï¼‰é‡Œï¼š
   - è¿›å…¥ `Content` æ–‡ä»¶å¤¹ã€‚
   - å³é”®ç©ºç™½å¤„ -> **Miscellaneous** -> **Data Asset**ã€‚
   - åœ¨å¼¹å‡ºçš„åˆ—è¡¨é‡Œæœç´¢ `HCI`ï¼Œåº”è¯¥èƒ½çœ‹åˆ° `HCIAbilityKitAsset`ã€‚
   - é€‰ä¸­å®ƒï¼Œç‚¹å‡» Selectã€‚
   - éšä¾¿èµ·ä¸ªå `DA_Test`ã€‚
3. åŒå‡»æ‰“å¼€å®ƒï¼š
   - ä½ åº”è¯¥èƒ½çœ‹åˆ° `Kit Id`ã€`Display Name`ã€`Damage` è¿™äº›å­—æ®µã€‚
   - è¯•ç€å¡«ä¸€ä¸‹æ•°å€¼ã€‚

ğŸ‰ **æ­å–œï¼ä½ çš„ç¯å¢ƒå’Œä»£ç é“¾è·¯é€šäº†ï¼**

---

## ğŸ“š æ¥ä¸‹æ¥è¯¥çœ‹å“ªä¸ªæ‰‹å†Œï¼Ÿ

å½“ä½ å®Œæˆäº†ä¸Šé¢çš„ Step 4ï¼Œè¯·ç«‹åˆ»æ‰“å¼€ï¼š
ğŸ‘‰ **`10_UEå®è·µ\02æ‰‹å†Œ_ç¼–è¾‘å™¨å·¥å…·é“¾MVP.md`**

æŒ‰é‡Œé¢çš„ **â€œ4. Import/Reimportâ€** ç« èŠ‚ï¼Œå¼€å§‹å†™ Factory ä»£ç ï¼Œè®© UE èƒ½ç›´æ¥è¯†åˆ«ä½ çš„ `.hciabilitykit` æ–‡ä»¶ï¼